<?php require 'config.php'; header('Content-Type: application/json'); $d=json_decode(file_get_contents("php://input")); $sid=$d->student_identifier; if(strpos($sid,'@')){ $u=$conn->query("SELECT id FROM users WHERE email='$sid'")->fetch(); $sid=$u?$u['id']:null; } if($sid){ $req=json_encode(['fromId'=>$d->parent_id, 'fromName'=>$d->parent_name]); $conn->prepare("UPDATE users SET pending_request_json=? WHERE id=?")->execute([$req, $sid]); echo json_encode(["message"=>"Success"]); }else{ echo json_encode(["message"=>"User not found"]); }