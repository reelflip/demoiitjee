<?php require 'config.php'; header('Content-Type: application/json'); $method = $_SERVER['REQUEST_METHOD']; if($method == 'POST'){ $data=json_decode(file_get_contents("php://input")); $tags = json_encode($data->tags); $conn->prepare("INSERT INTO mistake_notebook (id, user_id, question_text, subject_id, topic_id, test_name, user_notes, tags_json) VALUES (?,?,?,?,?,?,?,?)")->execute([$data->id, $data->user_id, $data->questionText, $data->subjectId, $data->topicId, $data->testName, $data->userNotes, $tags]); echo json_encode(["message"=>"Added"]); } if($method == 'PUT'){ $data=json_decode(file_get_contents("php://input")); $tags = json_encode($data->tags); $conn->prepare("UPDATE mistake_notebook SET user_notes=?, tags_json=? WHERE id=?")->execute([$data->userNotes, $tags, $data->id]); echo json_encode(["message"=>"Updated"]); } if($method == 'DELETE'){ $conn->prepare("DELETE FROM mistake_notebook WHERE id=?")->execute([$_GET['id']]); echo json_encode(["message"=>"Deleted"]); }