<?php include_once 'config.php'; $method = $_SERVER['REQUEST_METHOD']; if ($method === 'GET') { try { $stmt = $conn->query("SELECT * FROM contact_messages ORDER BY created_at DESC"); $messages = $stmt->fetchAll(PDO::FETCH_ASSOC); echo json_encode($messages); } catch (Exception $e) { http_response_code(500); echo json_encode(["error" => $e->getMessage()]); } } elseif ($method === 'DELETE' && isset($_GET['id'])) { try { $stmt = $conn->prepare("DELETE FROM contact_messages WHERE id = ?"); $stmt->execute([$_GET['id']]); echo json_encode(["message" => "Message deleted"]); } catch (Exception $e) { http_response_code(500); echo json_encode(["error" => $e->getMessage()]); } } ?>