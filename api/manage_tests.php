<?php require 'config.php'; header('Content-Type: application/json'); $data=json_decode(file_get_contents("php://input")); if($data->action == 'add_question'){ $opts=json_encode($data->options); $conn->prepare("INSERT INTO questions (id, subject_id, topic_id, question_text, options_json, correct_option_index) VALUES (?,?,?,?,?,?)")->execute([$data->id, $data->subjectId, $data->topicId, $data->text, $opts, $data->correctOptionIndex]); } if($data->action == 'create_test'){ $conn->prepare("INSERT INTO tests (id, title, duration_minutes, category, difficulty, exam_type) VALUES (?,?,?,?,?,?)")->execute([$data->id, $data->title, $data->durationMinutes, $data->category, $data->difficulty, $data->examType]); $stmt = $conn->prepare("INSERT INTO test_questions (test_id, question_id, question_order) VALUES (?,?,?)"); foreach($data->questions as $idx => $q){ $stmt->execute([$data->id, $q->id, $idx]); } } echo json_encode(["message"=>"Success"]);